<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Study Discussion Club</title>
<style>
body {margin:0;font-family: 'Poppins', sans-serif;background:#fffde7;}
.container {display:flex;justify-content:center;align-items:center;min-height:100vh;}
.card {background:#fff;padding:25px;border-radius:16px;box-shadow:0 4px 10px rgba(0,0,0,0.1);width:90%;max-width:420px;text-align:center;}
button {width:100%;padding:12px;border:none;border-radius:10px;background:#007aff;color:white;font-weight:bold;margin-top:10px;cursor:pointer;}
input, select {width:100%;padding:10px;margin-top:10px;border-radius:8px;border:1px solid #ddd;}
h2 {color:#333;}
h3 {margin-bottom:10px;}
.box {background:#f7f7f7;padding:10px;margin-top:10px;border-radius:10px;}
</style>
</head>
<body>
<div class="container">
  <div class="card" id="app">Loading...</div>
</div>

<script type="text/javascript">
const app = document.getElementById("app");
function show(html){ app.innerHTML = html; }

// ================= WELCOME =================
show(`
  <h2>Welcome to Study Discussion Club</h2>
  <button onclick="signup()">Sign Up</button>
  <button onclick="login()">Login</button>
`);

function signup(){
  show(`<h2>Sign Up</h2>
  <input id="email" type="email" placeholder="Email">
  <input id="pass" type="password" placeholder="Password">
  <button onclick="examList()">Sign Up</button>`);
}

function login(){
  show(`<h2>Login</h2>
  <input id="email" type="email" placeholder="Email">
  <input id="pass" type="password" placeholder="Password">
  <button onclick="examList()">Login</button>`);
}

// ================= EXAM LIST =================
function examList(){
  show(`<h2>Select Exam</h2>
  <select id="exam">
    <option>UPSC</option>
    <option>SSC</option>
    <option>Banking</option>
  </select>
  <button onclick="paymentScreen()">Next</button>`);
}

// ================= PAYMENT =================
function paymentScreen(){
  const exam = document.getElementById("exam").value;
  show(`
  <h2>Subscription</h2>
  <div class="box">
    <h3>${exam} Premium Plan</h3>
    <p>✅ Daily Current Affairs<br>
       ✅ Daily Practice Questions<br>
       ✅ Mind Maps<br>
       ✅ ${exam} Books Summary<br>
       ✅ Discussion & Contest Entry</p>
  </div>
  <button onclick="openUPI()">Pay Now</button>
  <input id="code" placeholder="Enter Code (BIGHIT)">
  <button onclick="verifyCode()">Submit Code</button>
  <div id="status"></div>
  `);
}

function openUPI(){
  const upiLink = "upi://pay?pa=demo@upi&pn=StudyClub&am=99&cu=INR";
  window.location.href = upiLink;
  // start waiting for response
  setTimeout(() => {
    document.getElementById("status").innerHTML = `
    <div class='box'>
      <p>We haven't received a payment response yet.<br>
      Our team will manually verify your payment within 12 hours.</p>
      <input id='uname' placeholder='Full Name'>
      <input id='umobile' placeholder='Mobile Number'>
      <input id='uupi' placeholder='Your UPI ID'>
      <button onclick='submitManual()'>Submit for Verification</button>
    </div>`;
  }, 120000); // 2 minutes = 120000 ms
}

function verifyCode(){
  const code = document.getElementById("code").value.trim();
  if(code === "BIGHIT"){
    activatePlan();
  } else {
    alert("Invalid code. Please check your payment or wait for verification.");
  }
}

function submitManual(){
  const name = document.getElementById("uname").value;
  const mobile = document.getElementById("umobile").value;
  const upi = document.getElementById("uupi").value;
  fetch("https://sheetdb.io/api/v1/gt8vb3ysgkonl", {
    method: "POST",
    headers: {"Content-Type":"application/json"},
    body: JSON.stringify({data:[{name, mobile, upi, date:new Date().toLocaleString()}]})
  });
  document.getElementById("status").innerHTML = "<p>Thank you! We'll verify your payment soon.</p>";
}

function activatePlan(){
  const today = new Date();
  const expiry = new Date(today.getTime() + (20 * 24 * 60 * 60 * 1000));
  localStorage.setItem("expiry", expiry.toDateString());
  homeScreen();
}

// ================= HOME SCREEN =================
function homeScreen(){
  const expiry = localStorage.getItem("expiry");
  show(`<h2>Study Discussion Club</h2>
  <p>Plan active till: <b>${expiry}</b></p>
  <div class="box" onclick="openScreen('Current Affairs')">Current Affairs</div>
  <div class="box" onclick="openScreen('Practice Questions')">Practice Questions</div>
  <div class="box" onclick="openScreen('Mind Maps')">Mind Maps</div>
  <div class="box" onclick="openScreen('UPSC Books Summary')">Quick Books Revision</div>
  <div class="box" onclick="openScreen('Interview Practice Questions')">Interview Practice Questions</div>`);
}

// ================= STUDY SCREEN =================
function openScreen(title){
  show(`<h2>${title}</h2>
  <img src="https://i.imgur.com/UhPzHM1.jpeg" style="width:100%;border-radius:10px;">
  <button onclick="homeScreen()">Back</button>`);
}
</script>
</body>
</html>
