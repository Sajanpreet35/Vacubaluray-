<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Study Discussion Club</title>
    <meta name="viewport" content="width=device-width, initial-scale=1" />

    <!-- React + Babel -->
    <script src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>

    <!-- Firebase Modular SDK -->
    <script type="module">
      import { initializeApp } from "https://www.gstatic.com/firebasejs/11.0.1/firebase-app.js";
      import { getAuth, createUserWithEmailAndPassword, signInWithEmailAndPassword } from "https://www.gstatic.com/firebasejs/11.0.1/firebase-auth.js";
      import { getFirestore, doc, setDoc } from "https://www.gstatic.com/firebasejs/11.0.1/firebase-firestore.js";

      const firebaseConfig = {
        apiKey: "AIzaSyDwbIHTMWM_AQ-NlsdXGDzAfoC8Tf8lZiY",
        authDomain: "study-discussion-club.firebaseapp.com",
        projectId: "study-discussion-club",
        storageBucket: "study-discussion-club.appspot.com",
        messagingSenderId: "383378613377",
        appId: "1:383378613377:web:3b932c6b42076352811980"
      };

      const app = initializeApp(firebaseConfig);
      const auth = getAuth(app);
      const db = getFirestore(app);

      window._firebase = { auth, db, createUserWithEmailAndPassword, signInWithEmailAndPassword, doc, setDoc };
    </script>

    <style>
      body { margin:0; font-family:"Segoe UI",Arial,sans-serif; }
      input { padding:10px; border-radius:8px; margin-bottom:10px; width:100%; border:1px solid #ccc; }
      button { background-color:#007aff; padding:12px; border-radius:8px; margin-top:10px; width:100%; text-align:center; color:white; font-weight:bold; border:none; cursor:pointer; }
      .container { display:flex; flex-direction:column; align-items:center; justify-content:center; padding:20px; min-height:100vh; text-align:center; }
      .exam-box, .menu-btn { padding:15px; border-radius:10px; margin:8px; width:90%; max-width:400px; border:1px solid #ccc; cursor:pointer; background-color:#fff; }
      .feature-box { background:#fff; padding:15px; border-radius:12px; text-align:left; width:90%; max-width:420px; box-shadow:0 2px 6px rgba(0,0,0,0.1); margin-bottom:10px; }
      .notice-box { background:#fff7e6; border:1px solid #ffb347; border-radius:8px; padding:12px; margin-top:15px; width:90%; max-width:420px; }
      .image-frame { background:white; padding:10px; margin:10px 0; border-radius:10px; box-shadow:0 2px 5px rgba(0,0,0,0.2); width:90%; max-width:400px; }
      .image-frame img { width:100%; border-radius:10px; }
      .back-btn { color:#007aff; cursor:pointer; font-weight:bold; align-self:flex-start; margin-bottom:10px; }
    </style>
  </head>
  <body>
    <div id="root"></div>

    <script type="text/babel">
      const { useState, useEffect } = React;

      function App() {
        const [screen,setScreen] = useState("welcome");
        const [signupData,setSignupData] = useState({username:"",email:"",password:"",mobile:"",pin:""});
        const [loginData,setLoginData] = useState({email:"",password:""});
        const [selectedExam,setSelectedExam] = useState(null);
        const [paymentStatus,setPaymentStatus] = useState("pending");
        const [manualNotice,setManualNotice] = useState(false);

        const contentImages = {
          "Current Affairs": [
            "https://raw.githubusercontent.com/demo/demo-repo/main/current1.jpg",
            "https://raw.githubusercontent.com/demo/demo-repo/main/current2.jpg"
          ],
          "Practice Questions": [
            "https://raw.githubusercontent.com/demo/demo-repo/main/practice1.jpg",
            "https://raw.githubusercontent.com/demo/demo-repo/main/practice2.jpg"
          ],
          "Mind Maps": [
            "https://raw.githubusercontent.com/demo/demo-repo/main/mind1.jpg"
          ],
          "UPSC Books Summary": [
            "https://raw.githubusercontent.com/demo/demo-repo/main/book1.jpg"
          ],
          "Interview Practice Questions": [
            "https://raw.githubusercontent.com/demo/demo-repo/main/interview1.jpg"
          ]
        };

        const bgColors = {
          "Current Affairs":"#E6E6FA",
          "Practice Questions":"#B0E0E6",
          "Mind Maps":"#A9A9A9",
          "UPSC Books Summary":"#F0E68C",
          "Interview Practice Questions":"#ADD8E6"
        };

        // Payment timeout
        useEffect(()=>{
          if(screen==="payment" && paymentStatus==="pending"){
            const timer=setTimeout(()=>setManualNotice(true),180000);
            return ()=>clearTimeout(timer);
          }
        },[screen,paymentStatus]);

        const handleSignup = async ()=>{
          const { auth, db, createUserWithEmailAndPassword, doc, setDoc } = window._firebase;
          const { username,email,password,mobile,pin } = signupData;
          if(!email || !password){ alert("Please fill all details"); return; }
          try{
            const userCred = await createUserWithEmailAndPassword(auth,email,password);
            const user = userCred.user;
            await setDoc(doc(db,"users",user.uid),{username,email,mobile,pin,createdAt:new Date().toISOString()});
            alert("Signup successful ✅");
            setScreen("examlist");
          } catch(err){ alert("Signup failed ❌ "+err.message); }
        };

        const handleLogin = async ()=>{
          const { auth, signInWithEmailAndPassword } = window._firebase;
          try{
            await signInWithEmailAndPassword(auth, loginData.email, loginData.password);
            alert("Login successful ✅");
            setScreen("examlist");
          } catch(err){ alert("Login failed ❌ "+err.message); }
        };

        // --- Screens ---
        if(screen==="welcome")
          return (
            <div className="container" style={{backgroundColor:"#90EE90"}}>
              <h2>
